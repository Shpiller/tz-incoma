<app-books-search [query]="query" (search)="searchBooks($event)"></app-books-search>

<div *ngIf="getBooksLoading(); else showResults">Выполняется поиск...</div>

<ng-template #showResults>

    <div *ngIf="!booksResponse; else results">Начните поиск...</div>

    <ng-template #results>

        <div *ngIf="!booksResponse.items?.length; else showItems">По Вашему запросу ничего не найдено</div>

        <ng-template #showItems>
            <div>Найдено всего: {{booksResponse.totalItems}}</div>
            <div *ngFor="let book of booksResponse.items; let i = index;">
                {{i + 1}}. {{book.volumeInfo.title}}. {{book.volumeInfo.subtitle}}
            </div>
        </ng-template>

        <div *ngIf="booksResponse.totalItems > booksResponse.items.length">

            <div *ngIf="getNextBooksPageLoading(); else getNextPageButton">
                Подгрузка результатов...
            </div>

            <ng-template #getNextPageButton>
                <button (click)="getNextPage()">Загрузить ещё результаты</button>
            </ng-template>

        </div>
    </ng-template>
</ng-template>
